{{navbar}}
<div id="profile">
    <h1>Profile</h1>
    <br>
    <p>This is the profile page.</p>
</div>
{{footer}}

<script>
    async function fetchUserData() {
        try {


            const response = await fetch("/api/routes/user.php", {
                method: "GET",
                headers: {
                    "Content-Type": "application/json",
                    "Accept": "application/json"
                }
            });

            if (!response.ok) {
                console.error('Network response was not ok:', response.statusText);
                throw new Error('Network response was not ok.');
            }

            const data = await response.json();


            if (data.success) {
                document.querySelector("#profile").innerHTML += `
                <br>
                <p>Username: ${data.user.username}</p>
                <br>
                <p>Email: ${data.user.email}</p>
                <br>
                <p>Role: ${data.user.role}</p>
            `;
            } else {
                document.querySelector("#profile").innerHTML += `<p>${data.message}</p>`;
            }
        } catch (error) {
            console.error('Error fetching user data:', error);
            document.querySelector("#profile").innerHTML += "<p>Unable to fetch user data. Please try again later.</p>";
        }
    }

    (async () => {
        await fetchUserData();
    })();

</script>

<style>
    #profile {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
        height: 100vh;
    }
</style>