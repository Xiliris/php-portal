{{navbar}}
<div class="change-password--container">
  <div id="change-passwordForm" method="post">
    <h2>Change Password</h2>
    <div>
      <label for="current-password">Current Password</label>
      <input
        type="password"
        name="old-password"
        placeholder="Current password"
        id="old-password"
      />
    </div>
    <div>
      <label for="new-password">New Password</label>
      <input
        type="password"
        name="new-password"
        placeholder="New password"
        id="new-password"
      />
    </div>
    <div>
      <label for="confirm-password">Confirm Password</label>
      <input
        type="password"
        name="confirm-password"
        placeholder="Confirm password"
        id="confirm-password"
      />
    </div>
    <p id="error-message"></p>
    <button class="btn-primary" id="confirm-change-password">Confirm</button>
  </div>

  <script>
    document
      .getElementById("confirm-change-password")
      .addEventListener("click", function (e) {
        e.preventDefault();
        const formData = new FormData();
        formData.append(
          "old_password",
          document.getElementById("old-password").value
        );
        formData.append(
          "new_password",
          document.getElementById("new-password").value
        );
        formData.append(
          "confirm_password",
          document.getElementById("confirm-password").value
        );

        fetch("/api/routes/changePassword.php", {
          method: "POST",
          body: formData,
        })
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
            if (data.success) {
              window.location.href = "/";
            } else {
              document.getElementById("error-message").innerText = data.message;
            }
          });
      });
  </script>

  <style>
    #error-message {
      color: red;
    }

    .change-password--container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    #change-passwordForm {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      border: 1px solid #ccc;
      border-radius: 12px;
      padding: 2rem;
      width: 400px;
    }

    #change-passwordForm h2 {
      text-align: center;
      margin-bottom: 1rem;
    }

    #change-passwordForm input {
      margin-top: 0.2rem;
      padding: 0.7rem;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1.1rem;
    }

    #change-passwordForm div {
      display: flex;
      flex-direction: column;
    }
  </style>
</div>
