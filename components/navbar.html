<nav id="main-nav">
  <section>
    <a href="/" data-link class="nav--logo"> PHP Portal </a>
    <div class="item-section">
      <a href="/person-of-interest" data-link>Person of Interest</a>
      <a href="/coming" data-link>Coming</a>
      <a href="/news" data-link>News</a>
      <a href="/about" data-link>About</a>
      <a href="/partners" data-link>Partners</a>
    </div>
    <div class="button-section" id="nav-options">
      <a class="button secondary" href="/donate" data-link>Donate</a>
    </div>
  </section>
</nav>

<script>
  async function handleUserRole() {
    const res = await fetch("/api/routes/user.php");
    const data = await res.json();

    const permissionLevel = {
      null: 0,
      user: 1,
      moderator: 2,
      admin: 3,
      owner: 4,
    };

    if (data.success && data.user) {
      const role = data.user.role;

      if (permissionLevel[role] >= permissionLevel["user"]) {
        const navOptions = document.getElementById("nav-options");

        navOptions.innerHTML += `
          <a class="button primary" href="/shop" data-link>Shop</a>
        `;
      }

      if (permissionLevel[role] >= permissionLevel["admin"]) {
        const navOptions = document.getElementById("nav-options");

        navOptions.innerHTML += `
          <a class="button tertiary" href="/dashboard" data-link>Dashboard</a>
        `;
      }

      if (permissionLevel[role] >= permissionLevel["owner"]) {
        const navOptions = document.getElementById("nav-options");

        navOptions.innerHTML += `
          <a class="button fortiary" href="/master-panel" data-link>Master Panel</a>
        `;
      }
    }
  }

  handleUserRole();
</script>

<style>
  #main-nav {
    width: 100%;
    height: 5em;
    display: flex;
    align-items: center;
    background-color: white;
    position: fixed;
    top: 0;
    z-index: 100;
    border-bottom: 1px solid #f1f1f1;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  }

  #main-nav section {
    width: 95%;
    margin: 0 auto;
    display: flex;
    align-items: end;
  }

  .nav--logo {
    font-size: 2em;
    font-weight: 500;
    cursor: pointer;
    line-height: 0.81em;
  }

  #main-nav .item-section {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-left: 1.5em;
    gap: 1.5em;
    height: 100%;
    color: slategrey;
    line-height: 1em;
  }

  #main-nav .item-section a {
    font-size: 1.2em;
  }

  #main-nav .button-section {
    margin-left: auto;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1em;
  }

  #main-nav .button-section .button {
    padding: 0.5em 1em;
    border: none;
    border-radius: 5px;
    background-color: #f1f1f1;
    cursor: pointer;
    font-weight: bold;
  }

  #main-nav .button-section .primary {
    background-color: #ffd500;
    color: white;
  }

  #main-nav .button-section .secondary {
    background-color: red;
    color: white;
  }

  #main-nav .button-section .tertiary {
    background-color: rgb(92, 114, 125);
    color: white;
  }

  #main-nav .button-section .fortiary {
    background-color: green;
    color: white;
  }
</style>
