RewriteEngine On

# Handle API requests
RewriteCond %{REQUEST_URI} ^/api/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/(.*)$ /api/routes/index.php [QSA,L]

# Handle client requests
RewriteCond %{REQUEST_URI} !^/api/
RewriteCond %{REQUEST_URI} !^/client/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /client/$1 [QSA,L]

# Fallback to client/index.html for SPA
RewriteCond %{REQUEST_URI} !^/api/
RewriteCond %{REQUEST_URI} !^/client/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /client/index.html [QSA,L]
